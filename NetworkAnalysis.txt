#Source Identification
consumerKey = '08LJMN5T5xVjliZdQRj6itPAb'
consumerSecret = 'cddUGZL8W8MXAQv1llbVJIiLoBWjHuTBOxSVhD8XOks46RO1lf'
OauthToken = '1089408873939709952-iHq2H02pj9Uryx4L1rUoK8VoO1hZQm'
OauthSecret = 'usFj5E3jxIfQ8T6UeaccmtwRH8JUWjwwuwxoYuB3PHsGI'

#Setup twitter connection
library(twitteR)
setup_twitter_oauth(consumerKey, consumerSecret, OauthToken, OauthSecret)


install.packages('tidyverse')
library(tidyverse)
install.packages('rtweet')
library(rtweet)

data <- search_tweets("AnandMahindra", n = 50)

data_profile <- search_users("@anandmahindra")

data_profile$name
data_profile$description
data_profile$location
data_profile$followers_count

followers <- get_followers("@anandmahindra")
glimpse(followers)
ids <- sample(followers$user_id, size = 100, replace = FALSE,prob = NULL)
friends <- list()

# Combine data tables in list
friends <- bind_rows(friends) %>% 
  rename(friend = followers$user_id)

install.packages('here')
library(here)
write_csv(friends, here("twitter_friends.csv"))

friends <- read_csv(here("twitter_friends.csv"))
filter(friends, friend %in% user)

net <- friends %>% 
  group_by(friend) %>% 
  mutate(count = n()) %>% 
  ungroup() %>% 
  filter(count > 1)
glimpse(net)

library(tidygraph)
install.packages('tidygraph')

g <- net %>% 
  select(user, friend) %>%  # drop the count column
  as_tbl_graph()
g

install.packages('ggraph')
library(ggraph)
ggraph(g) + geom_edge_link() + geom_node_point(size = 3, colour = 'steelblue') + theme_graph()
